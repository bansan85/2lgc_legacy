Compilation sous Windows
========================

Aucun prérequis n'est nécessaire pour Windows. La présente procédure explique la compilation depuis un ordinateur supposé "vierge".

Le choix pour compiler l'application s'est porté sur l'application MinGW et son environnement proche de Linux.
Exécutez le programme : mingw-get-inst-20110530.exe (http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/).
Lors de l'installation cochez "Download latest repository catalogues", laissez c:\MinGW pour le dossier par défaut et cochez dans les options d'installation "MinGW Compiler Suite" et "MinGW Developer ToolKit".
Une fois l'installation terminée, lancez MinGW en mode administrateur (nécessaire uniquement pour compiler gtk+3) et exécutez les commandes suivantes :

ln -s /c/Python27/python27.dll /usr/bin/python27.dll && \
ln -s /c/Python27/libs/libpython27.a /usr/lib/libpython27.a && \
ln -s /c/Python27/python.exe /usr/bin/python.exe && \
ln -s /c/Python27/include /usr/include/python2.7 && \
ln -s /c/Python27/Lib /usr/lib/python2.7 && \
mingw-get install msys-wget && \
mingw-get install msys-unzip && \
(test -d comp || mkdir comp) && \
cd comp && \
(test -f zlib-1.2.7.tar.bz2 || wget http://zlib.net/zlib-1.2.7.tar.bz2) && \
tar xvjf zlib-1.2.7.tar.bz2 && \
cd zlib-1.2.7 && \
make -j3 -f win32/Makefile.gcc && \
make -f win32/Makefile.gcc install BINARY_PATH="c:/MinGW/bin" LIBRARY_PATH="c:/MinGW/lib" INCLUDE_PATH="c:/MinGW/include" && \
cp zlib1.dll c:/MinGW/bin/libz.dll && \
cd .. && \
(test -f libffi-3.0.11.tar.gz || wget ftp://sourceware.org/pub/libffi/libffi-3.0.11.tar.gz) && \
tar xvzf libffi-3.0.11.tar.gz && \
cd libffi-3.0.11 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f glib-2.33.10.tar.xz || wget http://ftp.acc.umu.se/pub/gnome/sources/glib/2.33/glib-2.33.10.tar.xz) && \
tar xvaf glib-2.33.10.tar.xz && \
cd glib-2.33.10 && \
sed -i 's/tests//g' gio/Makefile.am glib/Makefile.am gobject/Makefile.am && \
sed -i 's/tests$//g' Makefile.am Makefile.in gio/Makefile.in glib/Makefile.in gobject/Makefile.in && \
sed -i 's/tests $//g' Makefile.am Makefile.in gio/Makefile.in glib/Makefile.in gobject/Makefile.in && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" LIBFFI_CFLAGS="-Ic:/MinGW/lib/libffi-3.0.11/include" LIBFFI_LIBS="-lffi" ./configure --disable-static --enable-shared --with-threads=win32 --prefix=c:/MinGW && \
make -j3 && make install && \
cp gio/gdesktopappinfo.h c:/MinGW/include/glib-2.0/gio/ && cd .. && \
(test -f pkg-config-0.27.1.tar.gz || wget http://pkgconfig.freedesktop.org/releases/pkg-config-0.27.1.tar.gz) && \
tar xvzf pkg-config-0.27.1.tar.gz && \
cd pkg-config-0.27.1 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" GLIB_LIBS="-lglib-2.0" GLIB_CFLAGS="-Ic:/MinGW/include/glib-2.0 -Ic:/MinGW/lib/glib-2.0/include" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f libxml2-2.8.0.tar.gz || wget ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz) && \
tar xvzf libxml2-2.8.0.tar.gz && \
cd libxml2-2.8.0 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --without-icu --without-python --disable-ipv6 --without-threads --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f jpegsrc.v8d.tar.gz || wget http://www.ijg.org/files/jpegsrc.v8d.tar.gz) && \
tar xvzf jpegsrc.v8d.tar.gz && \
cd jpeg-8d && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f tiff-4.0.2.zip || wget http://download.osgeo.org/libtiff/tiff-4.0.2.zip) && \
tar xvzf tiff-4.0.2.zip && \
cd tiff-4.0.2 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --enable-zlib --enable-jpeg --without-x --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f libpng-1.5.12.tar.xz || wget ftp://ftp.simplesystems.org/pub/png/src/libpng-1.5.12.tar.xz) && \
tar xvaf libpng-1.5.12.tar.xz && \
cd libpng-1.5.12 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f gdk-pixbuf-2.26.3.tar.xz || wget http://ftp.acc.umu.se/pub/gnome/sources/gdk-pixbuf/2.26/gdk-pixbuf-2.26.3.tar.xz) && \
tar xvaf gdk-pixbuf-2.26.3.tar.xz && \
cd gdk-pixbuf-2.26.3 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --with-libjpeg --with-libtiff --with-libpng --disable-introspection --prefix=c:/MinGW && \
sed -i 's/docs tests//g' Makefile && \
find . -name "Makefile" -exec sed -i "s///g" {} \; && \
make -j3 && make install && cd .. && \
(test -f pixman-0.26.2.tar.gz || wget http://cairographics.org/releases/pixman-0.26.2.tar.gz) && \
tar xvzf pixman-0.26.2.tar.gz && \
cd pixman-0.26.2 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --enable-sse2 --prefix=c:/MinGW && \
sed -i "s/demos test//g" Makefile.am Makefile.in && \
make -j3 && make install && cd .. && \
(test -f freetype-2.4.10.tar.bz2 || wget http://downloads.sourceforge.net/project/freetype/freetype2/2.4.10/freetype-2.4.10.tar.bz2) && \
tar xvjf freetype-2.4.10.tar.bz2 && \
cd freetype-2.4.10 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f fontconfig-2.10.1.tar.gz || wget http://freedesktop.org/software/fontconfig/release/fontconfig-2.10.1.tar.gz) && \
tar xvzf fontconfig-2.10.1.tar.gz && \
cd fontconfig-2.10.1 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --enable-libxml2 --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(!(test -f X) || (
	(test -f glew-1.7.0.tgz || wget http://downloads.sourceforge.net/project/glew/glew/1.7.0/glew-1.7.0.tgz) && \
	tar xvzf glew-1.7.0.tgz && \
	cd glew-1.7.0 && \
	make -j3 && make GLEW_DEST="c:/MinGW" install.all && cd .. && \
	(test -f util-macros-1.17.tar.gz || wget http://xorg.freedesktop.org/releases/individual/util/util-macros-1.17.tar.gz) && \
	tar xvzf util-macros-1.17.tar.gz && \
	cd util-macros-1.17 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f libxslt-1.1.26.tar.gz || wget ftp://xmlsoft.org/libxslt/libxslt-1.1.26.tar.gz) && \
	tar xvzf libxslt-1.1.26.tar.gz && \
	cd libxslt-1.1.26 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f xproto-7.0.23.tar.gz || wget http://xorg.freedesktop.org/releases/individual/proto/xproto-7.0.23.tar.gz) && \
	tar xvzf xproto-7.0.23.tar.gz && \
	cd xproto-7.0.23 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	sed -i "s/CARD8\t\tBOOL/int\t\tBOOL/g" Xmd.h && \
	sed -i "s/typedef long INT32/typedef int INT32/g" Xmd.h && \
	make -j3 && make install && cd .. && \
	(test -f xextproto-7.2.1.tar.gz || wget http://xorg.freedesktop.org/releases/individual/proto/xextproto-7.2.1.tar.gz) && \
	tar xvzf xextproto-7.2.1.tar.gz && \
	cd xextproto-7.2.1 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f xtrans-1.2.7.tar.gz || wget http://xorg.freedesktop.org/releases/individual/lib/xtrans-1.2.7.tar.gz) && \
	tar xvzf xtrans-1.2.7.tar.gz && \
	cd xtrans-1.2.7 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f libXau-1.0.7.tar.gz || wget http://xorg.freedesktop.org/releases/individual/lib/libXau-1.0.7.tar.gz) && \
	tar xvzf libXau-1.0.7.tar.gz && \
	cd libXau-1.0.7 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f xcmiscproto-1.2.2.tar.gz || wget http://xorg.freedesktop.org/releases/individual/proto/xcmiscproto-1.2.2.tar.gz) && \
	tar xvzf xcmiscproto-1.2.2.tar.gz && \
	cd xcmiscproto-1.2.2 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f bigreqsproto-1.1.2.tar.gz || wget http://xorg.freedesktop.org/releases/individual/proto/bigreqsproto-1.1.2.tar.gz) && \
	tar xvzf bigreqsproto-1.1.2.tar.gz && \
	cd bigreqsproto-1.1.2 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f kbproto-1.0.6.tar.gz || wget http://xorg.freedesktop.org/releases/individual/proto/kbproto-1.0.6.tar.gz) && \
	tar xvzf kbproto-1.0.6.tar.gz && \
	cd kbproto-1.0.6 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f inputproto-2.2.tar.gz || wget http://xorg.freedesktop.org/releases/individual/proto/inputproto-2.2.tar.gz) && \
	tar xvzf inputproto-2.2.tar.gz && \
	cd inputproto-2.2 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f xcb-proto-1.7.1.tar.gz || wget http://xorg.freedesktop.org/releases/individual/xcb/xcb-proto-1.7.1.tar.gz) && \
	tar xvzf xcb-proto-1.7.1.tar.gz && \
	cd xcb-proto-1.7.1 && \
	PYTHON="c:/Python27/python.exe" CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f pthreads-w32-2-8-0-release.tar.gz || wget ftp://sourceware.org/pub/pthreads-win32/pthreads-w32-2-8-0-release.tar.gz) && \
	tar xvzf pthreads-w32-2-8-0-release.tar.gz && \
	cd pthreads-w32-2-8-0-release && \
	make clean GC && cp pthreadGC2.dll pthread.def libpthreadGC2.a c:/MinGW/lib && cd .. && \
	(test -f libpthread-stubs-0.3.tar.gz || wget http://xorg.freedesktop.org/releases/individual/xcb/libpthread-stubs-0.3.tar.gz) && \
	tar xvzf libpthread-stubs-0.3.tar.gz && \
	cd libpthread-stubs-0.3 && \
	sed -i 's/^int pthread_self.*$//g' stubs.c && \
	sed -i 's/^int pthread_exit.*$//g' stubs.c && \
	sed -i "s/t1 == t2/\(t1.p == t2.p\) \&\& (t1.x == t2.x)/" stubs.c && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
	sed -i "s/--mode=link.*LDFLAGS)/& -no-undefined/" Makefile && \
	make -j3 && make install && cd .. && \
	(test -f libxcb-1.8.1.tar.gz || wget http://xorg.freedesktop.org/releases/individual/xcb/libxcb-1.8.1.tar.gz) && \
	tar xvzf libxcb-1.8.1.tar.gz && \
	cd libxcb-1.8.1 && \
	PYTHON="c:/Python27/python.exe" CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --enable-xinput --disable-static --enable-shared --prefix=c:/MinGW && \
	sed -i 's/^LIBS =.*$/LIBS = -lwsock32 -lpthreadGC2/g' src/Makefile && \
	make -j3 && make install && cd .. && \
	(test -f libX11-1.4.99.901.tar.gz || wget http://xorg.freedesktop.org/releases/individual/lib/libX11-1.4.99.901.tar.gz) && \
	tar xvzf libX11-1.4.99.901.tar.gz && \
	cd libX11-1.4.99.901 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-local-transport --disable-unix-transport --enable-tcp-transport --disable-static --enable-shared --prefix=c:/MinGW && \
	sed -i "s/#include <dlfcn.h>//g" src/CrGlCur.c && \
	sed -i "s/\/\*/#include <windows.h> \/\*/g" src/CrGlCur.c && \
	sed -i "s/dlopen.*)/LoadLibrary(library)/g" src/CrGlCur.c && \
	sed -i "s/dlsym/GetProcAddress/g" src/CrGlCur.c && \
	make -j3 && make install && cd ..\
)) && \
(test -f cairo-1.10.2.tar.gz || wget http://cairographics.org/releases/cairo-1.10.2.tar.gz) && \
tar xvzf cairo-1.10.2.tar.xg && \
cd cairo-1.10.2 && \
sed -i "s/test perf//g" Makefile.am Makefile.in && \
(!(test -f X) || CFLAGS="-O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --enable-svg --enable-pdf --enable-ps --enable-png --enable-xml --enable-pthread --enable-gobject --enable-xlib --prefix=c:/MinGW) && \
(test -f X || CFLAGS="-O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --enable-svg --enable-pdf --enable-ps --enable-png --enable-xml --enable-pthread --enable-gobject --prefix=c:/MinGW) && \
make -j3 && make install && cd .. && \
(test -f ragel-6.7.tar.gz || wget http://www.complang.org/ragel/ragel-6.7.tar.gz) && \
tar xvzf ragel-6.7.tar.gz && \
cd ragel-6.7 && \
patch -p1 < ../../ragel.patch && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --prefix=c:/MinGW && \
make && make install && cd .. && \
(test -f harfbuzz-0.9.3.tar.gz || wget http://cgit.freedesktop.org/harfbuzz/snapshot/harfbuzz-0.9.3.tar.gz) && \
tar xvzf harfbuzz-0.9.3.tar.gz && \
cd harfbuzz-0.9.3 && \
autoheader && \
aclocal && \
libtoolize && \
automake --add-missing --copy && \
autoconf && \
CXXFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f pango-1.31.0.tar.xz || wget http://ftp.acc.umu.se/pub/gnome/sources/pango/1.31/pango-1.31.0.tar.xz) && \
tar xvaf pango-1.31.0.tar.xz && \
cd pango-1.31.0 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" CFLAGS="-march=i486" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --with-included-modules=basic-win32 --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f libcroco-0.6.5.tar.xz || wget http://ftp.gnome.org/pub/gnome/sources/libcroco/0.6/libcroco-0.6.5.tar.xz) && \
tar xvaf libcroco-0.6.5.tar.xz && \
cd libcroco-0.6.5 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f poppler-0.20.3.tar.gz || wget http://poppler.freedesktop.org/poppler-0.20.3.tar.gz) && \
tar xvzf poppler-0.20.3.tar.gz && \
cd poppler-0.20.3 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --without-x --disable-static --enable-shared --enable-zlib --enable-libjpeg --enable-libpng --enable-cairo-output --disable-introspection --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f atk-2.5.4.tar.xz || wget http://ftp.acc.umu.se/pub/gnome/sources/atk/2.5/atk-2.5.4.tar.xz) && \
tar xvaf atk-2.5.4.tar.xz && \
cd atk-2.5.4 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(!(test -f X) || (
	(test -f libXext-1.3.1.tar.gz || wget http://xorg.freedesktop.org/releases/individual/lib/libXext-1.3.1.tar.gz) && \
	tar xvzf libXext-1.3.1.tar.gz && \
	cd libXext-1.3.1 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f xineramaproto-1.2.1.tar.gz || wget http://xorg.freedesktop.org/releases/individual/proto/xineramaproto-1.2.1.tar.gz) && \
	tar xvzf xineramaproto-1.2.1.tar.gz && \
	cd xineramaproto-1.2.1 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f libXinerama-1.1.2.tar.gz ||wget http://xorg.freedesktop.org/releases/individual/lib/libXinerama-1.1.2.tar.gz) && \
	tar xvzf libXinerama-1.1.2.tar.gz && \
	cd libXinerama-1.1.2 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f xinput-1.3.0.tar.gz || wget http://xorg.freedesktop.org/releases/individual/app/xinput-1.3.0.tar.gz) && \
	tar xvzf xinput-1.3.0.tar.gz && \
	cd xinput-1.3.0 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
	make -j3 && make install && cd .. && \
	(test -f libXi-1.2.1.tar.gz || wget http://xorg.freedesktop.org/releases/individual/lib/libXi-1.2.1.tar.gz) && \
	tar xvzf libXi-1.2.1.tar.gz && \
	cd libXi-1.2.1 && \
	CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
	make -j3 && make install && cd .. \
)) && \
(test -f gtk+-3.5.12.tar.xz || wget http://ftp.acc.umu.se/pub/gnome/sources/gtk+/3.5/gtk+-3.5.12.tar.xz) && \
tar xvaf gtk+-3.5.12.tar.xz && \
cd gtk+-3.5.12 && \
sed -i 's/modules demos tests perf examples//g' Makefile.in Makefile.am && \
sed -i 's/\. tests/\./g' gtk/Makefile.in gtk/Makefile.am gdk/Makefile.in gdk/Makefile.am && \
sed -i 's/ tests$//g' gtk/Makefile.in gtk/Makefile.am gdk/Makefile.in gdk/Makefile.am && \
(!(test -f X) || CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-modules --disable-packagekit --disable-papi --disable-introspection --enable-x11-backend --enable-broadway-backend --disable-static --enable-shared --prefix=c:/MinGW) && \
(test -f X || CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-modules --disable-packagekit --disable-papi --disable-introspection --disable-static --enable-shared --prefix=c:/MinGW) && \
find . -name "Makefile" -exec sed -i "s///g" {} \; && \
sed -i 's/am__objects_3)/am__objects_3) $(am__objects_5)/g' gtk/Makefile && \
sed -i 's/gtk-launch$(EXEEXT) \\/ \\/g' gtk/Makefile && \
make -j3 && make install && cd .. && \
(test -f librsvg-2.34.2.tar.xz || wget http://ftp.acc.umu.se/pub/gnome/sources/librsvg/2.34/librsvg-2.34.2.tar.xz) && \
tar xvaf librsvg-2.34.2.tar.xz && \
cd librsvg-2.34.2 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --enable-introspection=no --prefix=c:/MinGW && \
make -j3 && make install && cd .. && \
(test -f SuiteSparse_config.tar.gz || wget http://www.cise.ufl.edu/research/sparse/UFconfig/current/SuiteSparse_config.tar.gz) && \
tar xvzf SuiteSparse_config.tar.gz && \
cd SuiteSparse_config && \
sed -i 's/-lrt//g' SuiteSparse_config.mk && \
sed -i 's/# CC = gcc/CC = gcc/g' SuiteSparse_config.mk && \
sed -i 's/# MAKE = make/MAKE = make/g' SuiteSparse_config.mk && \
sed -i 's/-O3 -fexceptions/-O3 -DNPARTITION -DNSUPERNODAL -fexceptions/g' SuiteSparse_config.mk && \
sed -i 's~INSTALL_LIB = .*$~INSTALL_LIB = "c:/MinGW/lib"~g' SuiteSparse_config.mk && \
sed -i 's~INSTALL_INCLUDE = .*$~INSTALL_INCLUDE = "c:/MinGW/include"~g' SuiteSparse_config.mk && \
make -j3 && \
make install && \
gcc -O3 -DNPARTITION -DNSUPERNODAL -fexceptions -c SuiteSparse_config.c && \
gcc -shared -Wl,-soname,libsuitesparseconfig.dll -o libsuitesparseconfig.dll SuiteSparse_config.o && \
cp libsuitesparseconfig.dll c:/MinGW/bin && \
cd .. && \
(test -f AMD.tar.gz || wget http://www.cise.ufl.edu/research/sparse/amd/current/AMD.tar.gz) && \
tar xvzf AMD.tar.gz && \
cd AMD && \
make -j3 && \
make install && \
gcc -shared -Wl,-soname,libamd.dll -o libamd.dll Lib/*.o && \
cp libamd.dll c:/MinGW/bin && \
cd .. && \
(test -f COLAMD.tar.gz || wget http://www.cise.ufl.edu/research/sparse/colamd/current/COLAMD.tar.gz) && \
tar xvzf COLAMD.tar.gz && \
cd COLAMD && \
make -j3 && \
make install && \
gcc -shared -Wl,-soname,libcolamd.dll -o libcolamd.dll Lib/*.o && \
cp libcolamd.dll c:/MinGW/bin && \
cd .. && \
(test -f CHOLMOD.tar.gz || wget http://www.cise.ufl.edu/research/sparse/cholmod/current/CHOLMOD.tar.gz) && \
tar xvzf CHOLMOD.tar.gz && \
cd CHOLMOD && \
make -j3 library && \
make install && \
gcc -shared -Wl,-soname,libcholmod.dll -o libcholmod.dll Lib/*.o -lamd -lcolamd && \
cp libcholmod.dll c:/MinGW/bin && \
cd .. && \
(test -f v0.2.3 || wget https://github.com/xianyi/OpenBLAS/tarball/v0.2.3 --no-check-certificate) && \
tar xvzf v0.2.3 && \
cd xianyi-OpenBLAS-e552452 && \
patch < ../../libopenblas.patch && \
make -j3 && make install && cd .. && \
(test -f UMFPACK.tar.gz || wget http://www.cise.ufl.edu/research/sparse/umfpack/current/UMFPACK.tar.gz) && \
tar xvzf UMFPACK.tar.gz && \
cd UMFPACK && \
make -j3 library && \
make install && \
gcc -shared -Wl,-soname,libumfpack.dll -o libumfpack.dll Lib/*.o -lamd -lcholmod -lcolamd -lopenblas -lgfortran -lsuitesparseconfig && \
cp libumfpack.dll c:/MinGW/bin && \
cd .. && \
mingw-get install gettext && \
(test -f libm3d-0.26.tar.bz2 || wget http://download.tuxfamily.org/m3dlib/libs_current/libm3d-0.26.tar.bz2) && \
tar xvaf libm3d-0.26.tar.bz2 && \
cd libm3d-0.26 && \
CFLAGS="-march=i686 -O0 -g3 -ggdb3 -pipe" PKG_CONFIG_PATH="c:/MinGW/lib/pkgconfig" ./configure --disable-static --enable-shared --prefix=c:/MinGW && \
make -j3 && make install && cd ..

Compilation sous Linux
======================

Pour compiler et installer l'application, il suffit de lancer les commandes suivantes :
./clean_config

autoscan
patch < diff-configure.scan.patch
mv configure.scan configure.ac
gettextize -c -f --no-changelog

cd po
patch < ../diff-po-Makevars.template.patch
cd ..
mv po/Makevars.template po/Makevars
rm -f po/POTFILES.in
find . -name "*.c" -o -name "*.cc" > po/POTFILES.in

autoheader
aclocal
libtoolize
automake --add-missing --copy
autoconf
./configure --with-gtk --prefix=/usr/local CFLAGS="" CXXFLAGS=""
sed -i 's/-DPIC/-DPIC -Wl,--as-needed/g' libtool
sed -i 's/-lcolamd -lcholmod/-lcholmod -lcolamd/g' `find . -name "Makefile"`
make -j3 && sudo make install && /usr/local/bin/codegui
sudo make install-data && make check -j3
make -C doc doc
NOTA :
    -pg
    --coverage est une option de deboguage qui permet à chaque lancement d'un programme de lister les lignes de code qui ont été exécutées et celles obsolètes.
      Pour utiliser cette fonctionnalité, il convient d'ajouter --coverage dans Makefile.am, de recompiler la source et de lancer codegui (par exemple).
      Les fichiers de statistiques des libraries sont placés dans lib/.libs/{*.gcno,*.gcda}. Il convient de les redescendre d'un niveau (mv lib/libs/{*.gcno,*.gcda} lib) et ensuite de lancer la commande gcov *.gcda.
      Pour chaque fichier .gcda est créé un fichier .c.gov qui contient le code source annoté et permet de savoir le nombre de fois que chaque ligne a été exécutée.


si le programme ne permet pas une compilation sans erreur par la procédure ci-dessus :
1) vérifier le message d'erreur, il s'agit peut-être d'une application dont dépend le logiciel qui est non installée
2) A défaut, il faut déposer un rapport de bogue afin de résoudre ce problème et ce, même si la solution est simple. L'objectif est que la compilation se passe toujours sans le moindre problème.



La commande suivante permet de créer un nouveau fichier de traduction dans une langue.
msginit -l fr -o fr.po -i `find . -name "*.pot"` : permet d'ajouter une langue (dans le cas ici, le français). L'abbréviation est compatible avec /usr/share/locale
NOTA : avant de lancer msginit, il est nécessaire de compiler l'application
